syntax = "proto3";
package kyc;
import "google/protobuf/empty.proto";

enum KycError {
    OK = 0;
    INTERNAL_ERROR = 1;
}

message CreateKycTokenRequest {
    string ClientId = 1;
    string Country = 2;
    string ProcessId = 3;
}

message CreateKycTokenResponseBody {
    string Token = 1;
    int64 CreatedAt = 2;
}

message CreateKycTokenResponse {
    oneof response {
        kyc.CreateKycTokenResponseBody Body = 1;
        kyc.KycError Error = 2;
    } 
}

message GetClientKycStatusRequest {
    string ClientId = 1;
}

message GetClientKycStatusBody {
    KycStatus Status = 1;
}

message GetClientKycStatusResponse {
    oneof response {
        kyc.GetClientKycStatusBody Body = 1;
        kyc.KycError Error = 2;
    } 
}


enum KycStatus
{
    Required = 0;
    Processing = 1;
    Verified = 2;
    Blocked = 3;
}

message GetClientKycProgressRequest {
    string ClientId = 1;
}

message GetClientKycProgressBody {
    InitKycStatus InitiationPoIStatus  = 1;
    InitKycStatus InitiationPoAStatus = 2;
    WaitKycStatus WaitPoIStatus = 3;
    WaitKycStatus WaitPoAStatus = 4;
    ContractSignedStatus ContractSignStatus = 5;
}

enum InitKycStatus {
    IKS_NOT_INIT = 0;
    IKS_SUCCESS = 1;
}

enum WaitKycStatus {        
    WKS_NOT_INIT = 0;
    WKS_PENDING = 1;
    WKS_SUCCESS = 2;
    WKS_FAIL = 3;
    WKS_RETRY = 4;
}

enum ContractSignedStatus
{
    CSS_NOT_INIT = 0;
    CSS_PENDING = 1;
    CSS_SUCCESS = 2;
    CSS_STATUS_FAIL = 3;
}
message GetClientKycProgressResponse {
    oneof response {
        kyc.GetClientKycStatusBody Body = 1;
        kyc.KycError Error = 2;
    } 
}

service KycGrpcService {
    rpc CreateKycToken(kyc.CreateKycTokenRequest) 
    returns (kyc.CreateKycTokenResponse);
    
    rpc GetClientKycStatus(kyc.GetClientKycStatusRequest) 
    returns (kyc.GetClientKycStatusResponse);
    
    rpc GetClientKycPprogress(kyc.GetClientKycProgressRequest) 
    returns (kyc.GetClientKycProgressResponse);

    rpc Ping(google.protobuf.Empty) returns (google.protobuf.Empty);
}
