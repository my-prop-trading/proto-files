syntax = "proto3";
package kyc;
import "google/protobuf/empty.proto";

enum KycError {
    OK = 0;
    INTERNAL_ERROR = 1;
}

message ProofClientIdentityRequest {
    string ClientId = 1;
    string Country = 2;
    string ProcessId = 3;
}

message ProofClientIdentityResponseBody {
    string Token = 1;
    int64 CreatedAt = 2;
}

message ProofClientIdentityResponse {
    oneof response {
        kyc.ProofClientIdentityResponseBody Body = 1;
        kyc.KycError Error = 2;
    } 
}

message RetryProofClientIdentityRequest {
    string ClientId = 1;
    string Country = 2;
    string ProcessId = 3;
}

message RetryProofClientIdentityResponseBody {
    string Token = 1;
    int64 CreatedAt = 2;
}

message RetryProofClientIdentityResponse {
    oneof response {
        kyc.RetryProofClientIdentityResponseBody Body = 1;
        kyc.KycError Error = 2;
    } 
}

message ProofClientAddressRequest {
    string ClientId = 1;
    string Country = 2;
    string ProcessId = 3;
}

message ProofClientAddressResponseBody {
    string Token = 1;
    int64 CreatedAt = 2;
}

message ProofClientAddressResponse {
    oneof response {
        kyc.ProofClientAddressResponseBody Body = 1;
        kyc.KycError Error = 2;
    } 
}

message RetryProofClientAddressRequest {
    string ClientId = 1;
    string Country = 2;
    string ProcessId = 3;
}

message RetryProofClientAddressResponseBody {
    string Token = 1;
    int64 CreatedAt = 2;
}

message RetryProofClientAddressResponse {
    oneof response {
        kyc.RetryProofClientAddressResponseBody Body = 1;
        kyc.KycError Error = 2;
    } 
}


message GetClientVerificationProgressRequest {
    string ClientId = 1;
}

message GetClientVerificationProgressBody {
    bool IsVerificationProgressEnabled = 1;
    InitKycStatus InitiationPoIStatus  = 2;
    InitKycStatus InitiationPoAStatus = 3;
    WaitKycStatus WaitPoIStatus = 4;
    WaitKycStatus WaitPoAStatus = 5;
    repeated ContractModel ContractSignStatus = 6;
}

enum InitKycStatus {
    IKS_NOT_INIT = 0;
    IKS_SUCCESS = 1;
}

enum WaitKycStatus {        
    WKS_NOT_INIT = 0;
    WKS_PENDING = 1;
    WKS_SUCCESS = 2;
    WKS_FAIL = 3;
    WKS_RETRY = 4;
} 

message ContractModel
{
    string ContractId = 1;
    ContractSignStatus ContractSignStatus = 2;
}
enum ContractSignStatus
{
    CSS_NOT_INIT = 0;
    CSS_PENDING = 1;
    CSS_SUCCESS = 2;
    CSS_STATUS_FAIL = 3;
}
message GetClientVerificationProgressResponse {
    oneof response {
        kyc.GetClientVerificationProgressBody Body = 1;
        kyc.KycError Error = 2;
    } 
}

service KycGrpcService {
    // From API
    rpc ProofClientIdentity(kyc.ProofClientIdentityRequest) 
    returns (kyc.ProofClientIdentityResponse);

    rpc RetryProofClientIdentity(kyc.RetryProofClientIdentityRequest) 
    returns (kyc.RetryProofClientIdentityResponse);

    rpc ProofClientAddress(kyc.ProofClientAddressRequest) 
    returns (kyc.ProofClientAddressResponse);

    rpc RetryProofClientAddress(kyc.RetryProofClientIdentityRequest) 
    returns (kyc.RetryProofClientIdentityResponse);

    rpc GetClientVerificationProgress(kyc.GetClientVerificationProgressRequest) 
    returns (kyc.GetClientVerificationProgressResponse);

    //FROM Backoffice


    //Ping
    rpc Ping(google.protobuf.Empty) returns (google.protobuf.Empty);
}
