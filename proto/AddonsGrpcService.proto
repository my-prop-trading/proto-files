syntax = "proto3";
package rewards;
import "google/protobuf/empty.proto";

enum AddonStatusGrpc {
  ACTIVE = 0;
  REFUNDED = 1;
  LOST = 2;
}

enum AddonModifierTypeGrpc {
  PAYOUT_SCHEDULE = 0;
  PROFIT_SPLIT = 1;
}

message AddonModifierGrpcModel {
  AddonModifierTypeGrpc Type = 1;
  string Value = 2;
}

message AvailableAddonGrpcModel {
  string Id = 1;
  string Name = 2;
  string Description = 3;
  double Price = 4;
  AddonModifierGrpcModel Modifier = 5;
  int64 UpdatedAt = 6;
}

message PurchasedAddonGrpcModel {
  string Id = 1;
  string Name = 2;
  string Description = 3;
  double Price = 4;
  AddonStatusGrpc Status = 5;
  AddonModifierGrpcModel Modifier = 6;
  string ClientId = 7;
  string TraderAccountId = 8;
  string OrderId = 9;
  string ParentId = 10;
  int64 UpdatedAt = 11;
}

message AvailableAddonBundleGrpcModel {
  string Id = 1;
  string Name = 2;
  string Description = 3;
  double DiscountPercent = 4;
  repeated string AddonIds = 5;
  int64 UpdatedAt = 6;

}

message PurchasedAddonBundleGrpcModel {
  string Id = 1;
  string Name = 2;
  string Description = 3;
  double DiscountPercent = 4;
  repeated string AddonIds = 5;
  string ClientId = 6;
  string TraderAccountId = 7;
  string OrderId = 8;
  string ParentId = 9;
  int64 UpdatedAt = 10;

}

message GetAvailableAddonsGrpcRequest {}

message GetAvailableAddonsGrpcResponse {
  AvailableAddonGrpcModel Items = 1;
}

message GetAvailableAddonBundlesGrpcRequest {}

message GetAvailableAddonBundlesGrpcResponse {
  AvailableAddonBundleGrpcModel Items = 1;
}

message CreateOrUpdateAddonsGrpcRequest {
  repeated AvailableAddonGrpcModel Items = 1;
}

message CreateOrUpdateAddonsGrpcResponse {}

message CreateOrUpdateAddonBundlesGrpcRequest {
  repeated AvailableAddonGrpcModel Items = 1;
}

message CreateOrUpdateAddonBundlesGrpcResponse {}

message GetPurchasedAddonsGrpcRequest {
  uint32 Limit = 1;
  uint32 Offset = 2;
  repeated string ClientIds = 3;
  repeated string TraderAccountIds = 4;
  repeated string OrderIds = 5;
}

message GetPurchasedAddonsGrpcResponse {
  PurchasedAddonGrpcModel Items = 1;
}

message DeleteAddonGrpcRequest {
  string Id = 1;
}

message DeleteAddonGrpcResponse {}

message DeleteAddonBundleGrpcRequest {
  string Id = 1;
}

message DeleteAddonBundleGrpcResponse {}

message PurchaseAddonGrpcRequest {
  string Id = 1;
  string ClientId = 2;
  string TraderAccountId = 3;
  string OrderId = 4;
  double PaidAmount = 5;
}

message PurchaseAddonGrpcResponse {
  PurchasedAddonGrpcModel Item = 1;
}

message GetPurchasedAddonBundlesGrpcRequest {
  uint32 Limit = 1;
  uint32 Offset = 2;
  repeated string ClientIds = 3;
  repeated string TraderAccountIds = 4;
  repeated string OrderIds = 5;
}

message GetPurchasedAddonBundlesGrpcResponse {
  PurchasedAddonGrpcModel Items = 1;
}

message PurchaseAddonBundleGrpcRequest {
  string Id = 1;
  string ClientId = 2;
  string TraderAccountId = 3;
  string OrderId = 4;
  double TotalPaidAmount = 5;
  map<string, double> PaidAmountsByAddonIds = 6;
}

message PurchaseAddonBundleGrpcResponse {
  PurchasedAddonBundleGrpcModel Bundle = 1;
  repeated PurchasedAddonGrpcModel Addons = 2;
}

service AddonsGrpcService {
  rpc GetAvailableAddons(GetAvailableAddonsGrpcRequest) returns (GetAvailableAddonsGrpcResponse);
  rpc DeleteAddon(DeleteAddonGrpcRequest) returns (DeleteAddonGrpcResponse);
  rpc CreateOrUpdateAddons(CreateOrUpdateAddonsGrpcRequest) returns (CreateOrUpdateAddonsGrpcResponse);

  rpc GetPurchasedAddons(GetPurchasedAddonsGrpcRequest) returns (GetPurchasedAddonsGrpcResponse);
  rpc PurchaseAddon(PurchaseAddonGrpcRequest) returns (PurchaseAddonGrpcResponse);

  rpc GetAvailableBundles(GetAvailableAddonBundlesGrpcRequest) returns (GetAvailableAddonBundlesGrpcResponse);
  rpc DeleteBundle(DeleteAddonBundleGrpcRequest) returns (DeleteAddonBundleGrpcResponse);
  rpc CreateOrUpdateBundles(CreateOrUpdateAddonBundlesGrpcRequest) returns (CreateOrUpdateAddonBundlesGrpcResponse);

  rpc GetPurchasedBundles(GetPurchasedAddonBundlesGrpcRequest) returns (GetPurchasedAddonBundlesGrpcResponse);
  rpc PurchaseBundle(PurchaseAddonBundleGrpcRequest) returns (PurchaseAddonBundleGrpcResponse);

  rpc Ping(google.protobuf.Empty) returns (google.protobuf.Empty);
}
