syntax = "proto3";
package addons;
import "google/protobuf/empty.proto";

enum AddonOrderStatusGrpc {
  ORDER_UNPAID = 0;
  ORDER_PAID = 1;
}

enum AddonStatusGrpc {
  ACTIVE = 0;
  REFUNDED = 1;
  LOST = 2;
}

enum AddonParameterTypeGrpc {
  PAYOUT_SCHEDULE_DAYS = 0;
  PAYOUT_SCHEDULE_MINUTES = 1;
  PROFIT_SPLIT = 2;
}

message AddonGrpcModel {
  string Id = 1;
  string Name = 2;
  string Description = 3;
  double PricePercent = 4;
  AddonParameterTypeGrpc ParameterType = 5;
  string ParameterValue = 6;
  int64 UpdatedAt = 7;
}

message AddonPurchaseGrpcModel {
  string Id = 1;
  string Name = 2;
  string Description = 3;
  double PricePercent = 4;
  AddonParameterTypeGrpc ParameterType = 5;
  string ParameterValue = 6;
  int64 UpdatedAt = 7;
  string ClientId = 8;
  string OrderId = 9;
  string TraderAccountId = 10;
  double FullPrice = 11;
  double DiscountAmount = 12;
  string ParentId = 13;
  AddonStatusGrpc Status = 14;
  optional string BundleId = 15;
}

message AddonOrderGrpcModel {
  string OrderId = 1;
  string ClientId = 2;
  int64 UpdatedAt = 3;
  repeated AddonGrpcModel Addons = 4;
  repeated AddonBundleGrpcModel Bundles = 5;
  map<string, double> AddonFullPrices = 6;
  map<string, double> AddonDiscountAmounts = 7;
  double FullPrice = 8;
  double DiscountAmount = 9;
  AddonOrderStatusGrpc Status = 10;
  double FinalPrice = 11;
  map<string, doublFinalPricerice12s = 12;
}

message AddonBundleGrpcModel {
  string Id = 1;
  string Name = 2;
  string Description = 3;
  double DiscountPercent = 4;
  repeated string AddonIds = 5;
  int64 UpdatedAt = 6;
}

message GetAddonsGrpcRequest {}

message GetAddonsGrpcResponse {
  repeated AddonGrpcModel Items = 1;
}

message GetBundlesGrpcRequest {}

message GetBundlesGrpcResponse {
  repeated AddonBundleGrpcModel Items = 1;
}

message AddOrUpdateAddonsGrpcRequest {
  repeated AddonGrpcModel Items = 1;
}

message AddOrUpdateAddonsGrpcResponse {}

message AddOrUpdateBundlesGrpcRequest {
  repeated AddonBundleGrpcModel Items = 1;
}

message AddOrUpdateBundlesGrpcResponse {}

message GetAddonPurchasesGrpcRequest {
  uint32 Limit = 1;
  uint32 Offset = 2;
  repeated string ClientIds = 3;
  repeated string TraderAccountIds = 4;
  repeated string OrderIds = 5;
  repeated AddonStatusGrpc Statuses = 6;
}

message GetAddonPurchasesGrpcResponse {
  repeated AddonPurchaseGrpcModel Items = 1;
}

message DeleteAddonGrpcRequest {
  string Id = 1;
}

message DeleteAddonGrpcResponse {}

message DeleteBundleGrpcRequest {
  string Id = 1;
}

message DeleteBundleGrpcResponse {}

message CreateOrderGrpcRequest {
  string ClientId = 1;
  double OrderPrice = 2;
  repeated string AddonIds = 3;
  repeated string BundleIds = 4;
  string OrderId = 6;
}

message CreateOrderGrpcResponse {
  AddonOrderGrpcModel Item = 1;
}

service AddonsGrpcService {
  rpc GetAddons(GetAddonsGrpcRequest) returns (GetAddonsGrpcResponse);
  rpc DeleteAddon(DeleteAddonGrpcRequest) returns (DeleteAddonGrpcResponse);
  rpc AddOrUpdateAddons(AddOrUpdateAddonsGrpcRequest) returns (AddOrUpdateAddonsGrpcResponse);

  rpc GetBundles(GetBundlesGrpcRequest) returns (GetBundlesGrpcResponse);
  rpc DeleteBundle(DeleteBundleGrpcRequest) returns (DeleteBundleGrpcResponse);
  rpc AddOrUpdateBundles(AddOrUpdateBundlesGrpcRequest) returns (AddOrUpdateBundlesGrpcResponse);

  rpc CreateOrder(CreateOrderGrpcRequest) returns (CreateOrderGrpcResponse);
  rpc GetAddonPurchases(GetAddonPurchasesGrpcRequest) returns (GetAddonPurchasesGrpcResponse);

  rpc Ping(google.protobuf.Empty) returns (google.protobuf.Empty);
}
